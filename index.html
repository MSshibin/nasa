<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tesseract | NASA Earth Observation Dashboard</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Animated Background -->
    <div class="animated-bg">
        <div class="floating-shape shape-1"></div>
        <div class="floating-shape shape-2"></div>
        <div class="floating-shape shape-3"></div>
    </div>

    <!-- Header -->
    <header>
        <div class="container">
            <nav class="navbar">
                <div class="logo">
                    <div class="logo-icon">
                        <i class="fas fa-cube"></i>
                    </div>
                    <span>Tesseract</span>
                </div>
                <div class="nav-actions">
                    <div class="api-key-input">
                        <input type="text" id="nasa-api-key" placeholder="Paste NASA POWER API Key">
                        <button id="save-api-key" class="btn-icon">
                            <i class="fas fa-save"></i>
                        </button>
                    </div>
                </div>
            </nav>
        </div>
    </header>

    <!-- Main Dashboard -->
    <main class="dashboard">
        <div class="container">
            <div class="dashboard-grid">
                <!-- Controls Panel -->
                <div class="controls-panel">
                    <div class="panel-header">
                        <h3><i class="fas fa-sliders-h"></i> Dashboard Controls</h3>
                    </div>

                    <!-- Location Selection -->
                    <div class="control-group">
                        <h4><i class="fas fa-map-marker-alt"></i> Location Selection</h4>
                        <div class="search-container">
                            <input type="text" id="location-search" placeholder="Search 1000+ cities worldwide...">
                            <div class="autocomplete-dropdown" id="autocomplete-results"></div>
                        </div>
                        <div class="map-selection">
                            <button id="map-pin-btn" class="btn-outline">
                                <i class="fas fa-thumbtack"></i> Drop Pin on Map
                            </button>
                        </div>
                        <div class="selected-location">
                            <i class="fas fa-check-circle"></i>
                            <span id="current-location">No location selected</span>
                        </div>
                    </div>

                    <!-- Date Selection -->
                    <div class="control-group">
                        <h4><i class="fas fa-calendar-alt"></i> Time Selection</h4>
                        <div class="time-options">
                            <div class="radio-group">
                                <label class="radio">
                                    <input type="radio" name="date-type" value="single" checked>
                                    <span class="radio-check"></span>
                                    Single Date
                                </label>
                                <label class="radio">
                                    <input type="radio" name="date-type" value="range">
                                    <span class="radio-check"></span>
                                    Date Range
                                </label>
                            </div>
                        </div>
                        <div class="date-inputs">
                            <div class="input-group single-date">
                                <label>Select Date</label>
                                <input type="date" id="single-date">
                            </div>
                            <div class="date-range" style="display: none;">
                                <div class="input-group">
                                    <label>Start Date</label>
                                    <input type="date" id="start-date">
                                </div>
                                <div class="input-group">
                                    <label>End Date</label>
                                    <input type="date" id="end-date">
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- NASA Data Sources -->
                    <div class="control-group">
                        <h4><i class="fas fa-satellite"></i> NASA Data Sources</h4>
                        <div class="data-sources">
                            <div class="source-item active">
                                <i class="fas fa-temperature-high"></i>
                                <span>Temperature (T2M)</span>
                            </div>
                            <div class="source-item active">
                                <i class="fas fa-cloud-rain"></i>
                                <span>Precipitation (PRECTOT)</span>
                            </div>
                            <div class="source-item active">
                                <i class="fas fa-tint"></i>
                                <span>Humidity (RH2M)</span>
                            </div>
                            <div class="source-item active">
                                <i class="fas fa-wind"></i>
                                <span>Wind Speed (WS2M)</span>
                            </div>
                        </div>
                    </div>

                    <button id="analyze-btn" class="btn btn-primary">
                        <i class="fas fa-chart-line"></i> Analyze Conditions
                    </button>
                </div>

                <!-- Map & Visualization -->
                <div class="visualization-panel">
                    <!-- Map Container -->
                    <div class="map-section">
                        <div class="section-header">
                            <h3><i class="fas fa-globe-americas"></i> Geospatial Analysis</h3>
                            <div class="map-info">
                                <span class="map-provider">Powered by OpenStreetMap</span>
                            </div>
                        </div>
                        <div class="map-container">
                            <div id="map"></div>
                            <div class="map-overlay">
                                <div class="coordinates">
                                    <span>Lat: <span id="map-lat">0.0000</span></span>
                                    <span>Lng: <span id="map-lng">0.0000</span></span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Weather Overview -->
                    <div class="weather-overview">
                        <div class="weather-cards">
                            <div class="weather-card temp">
                                <div class="weather-icon">
                                    <i class="fas fa-temperature-high"></i>
                                </div>
                                <div class="weather-info">
                                    <div class="value" id="temp-value">--°C</div>
                                    <div class="label">Temperature</div>
                                    <div class="probability" id="temp-prob">--% above normal</div>
                                </div>
                                <div class="weather-trend up">
                                    <i class="fas fa-arrow-up"></i>
                                </div>
                            </div>
                            <div class="weather-card precip">
                                <div class="weather-icon">
                                    <i class="fas fa-cloud-rain"></i>
                                </div>
                                <div class="weather-info">
                                    <div class="value" id="precip-value">--mm</div>
                                    <div class="label">Precipitation</div>
                                    <div class="probability" id="precip-prob">--% chance rain</div>
                                </div>
                                <div class="weather-trend down">
                                    <i class="fas fa-arrow-down"></i>
                                </div>
                            </div>
                            <div class="weather-card humidity">
                                <div class="weather-icon">
                                    <i class="fas fa-tint"></i>
                                </div>
                                <div class="weather-info">
                                    <div class="value" id="humidity-value">--%</div>
                                    <div class="label">Humidity</div>
                                    <div class="probability" id="humidity-prob">--% comfort level</div>
                                </div>
                                <div class="weather-trend stable">
                                    <i class="fas fa-minus"></i>
                                </div>
                            </div>
                            <div class="weather-card wind">
                                <div class="weather-icon">
                                    <i class="fas fa-wind"></i>
                                </div>
                                <div class="weather-info">
                                    <div class="value" id="wind-value">--m/s</div>
                                    <div class="label">Wind Speed</div>
                                    <div class="probability" id="wind-prob">--% gust probability</div>
                                </div>
                                <div class="weather-trend up">
                                    <i class="fas fa-arrow-up"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Results & Analytics -->
                <div class="results-panel">
                    <!-- Activity Recommendations -->
                    <div class="activity-section">
                        <div class="section-header">
                            <h3><i class="fas fa-star"></i> Activity Intelligence</h3>
                        </div>
                        <div class="activity-cards">
                            <div class="activity-card hiking-card" id="hiking-card">
                                <div class="activity-header">
                                    <div class="activity-icon">
                                        <i class="fas fa-hiking"></i>
                                    </div>
                                    <div class="activity-score">
                                        <div class="score-circle">
                                            <span class="score-value">--</span>
                                        </div>
                                        <span class="score-label">Hiking Score</span>
                                    </div>
                                </div>
                                <div class="activity-content">
                                    <h4>Mountain Adventure</h4>
                                    <div class="recommendation-message" id="hiking-rec">
                                        <i class="fas fa-info-circle"></i>
                                        <span>Select location to analyze hiking conditions</span>
                                    </div>
                                    <div class="weather-factors" id="hiking-factors">
                                        <div class="factor">
                                            <span class="factor-name">Temperature</span>
                                            <div class="factor-bar">
                                                <div class="factor-fill" data-score="0"></div>
                                            </div>
                                        </div>
                                        <div class="factor">
                                            <span class="factor-name">Precipitation</span>
                                            <div class="factor-bar">
                                                <div class="factor-fill" data-score="0"></div>
                                            </div>
                                        </div>
                                        <div class="factor">
                                            <span class="factor-name">Wind</span>
                                            <div class="factor-bar">
                                                <div class="factor-fill" data-score="0"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="activity-card travel-card" id="travel-card">
                                <div class="activity-header">
                                    <div class="activity-icon">
                                        <i class="fas fa-suitcase-rolling"></i>
                                    </div>
                                    <div class="activity-score">
                                        <div class="score-circle">
                                            <span class="score-value">--</span>
                                        </div>
                                        <span class="score-label">Travel Score</span>
                                    </div>
                                </div>
                                <div class="activity-content">
                                    <h4>City Exploration</h4>
                                    <div class="recommendation-message" id="travel-rec">
                                        <i class="fas fa-info-circle"></i>
                                        <span>Select location for travel recommendations</span>
                                    </div>
                                    <div class="weather-factors" id="travel-factors">
                                        <div class="factor">
                                            <span class="factor-name">Comfort</span>
                                            <div class="factor-bar">
                                                <div class="factor-fill" data-score="0"></div>
                                            </div>
                                        </div>
                                        <div class="factor">
                                            <span class="factor-name">Rain Risk</span>
                                            <div class="factor-bar">
                                                <div class="factor-fill" data-score="0"></div>
                                            </div>
                                        </div>
                                        <div class="factor">
                                            <span class="factor-name">Visibility</span>
                                            <div class="factor-bar">
                                                <div class="factor-fill" data-score="0"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Probability Analysis -->
                    <div class="probability-section">
                        <div class="section-header">
                            <h3><i class="fas fa-chart-pie"></i> Probability Analysis</h3>
                            <button id="download-report" class="btn-outline">
                                <i class="fas fa-file-pdf"></i> PDF Report
                            </button>
                        </div>
                        <div class="probability-cards">
                            <div class="prob-card">
                                <div class="prob-chart">
                                    <canvas id="temp-chart"></canvas>
                                </div>
                                <div class="prob-info">
                                    <h5>Temperature Probability</h5>
                                    <div class="prob-value" id="temp-threshold">--% > 30°C</div>
                                </div>
                            </div>
                            <div class="prob-card">
                                <div class="prob-chart">
                                    <canvas id="precip-chart"></canvas>
                                </div>
                                <div class="prob-info">
                                    <h5>Precipitation Chance</h5>
                                    <div class="prob-value" id="precip-threshold">--% heavy rain</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Trends Graph -->
                    <div class="trends-section">
                        <div class="section-header">
                            <h3><i class="fas fa-chart-line"></i> Recent Trends</h3>
                        </div>
                        <div class="trend-chart">
                            <canvas id="trends-chart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loading-overlay">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <h3>Fetching NASA Data</h3>
            <p>Analyzing weather patterns...</p>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="app.js"></script>
</body>
</html>